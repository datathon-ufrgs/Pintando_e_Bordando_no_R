<!DOCTYPE html>
<html>
  <head>
    <title>Pintando e bordando no R</title>
    <meta charset="utf-8">
    <meta name="author" content="Rodrigo Citton P. dos Reis  em colaboração com Markus C. Stein, Márcia H. Barbian  e Silvana Schneider     Departmento de Estatística" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/plotly-binding/plotly.js"></script>
    <script src="libs/typedarray/typedarray.min.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/plotlyjs/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotlyjs/plotly-latest.min.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Pintando e bordando no R
## ggplot2 e rmarkdown
### Rodrigo Citton P. dos Reis<br /> <small>em colaboração com Markus C. Stein, Márcia H. Barbian<br /> e Silvana Schneider</small> <br /> <br /> Departmento de Estatística
### <br> IX SEMANÍSTICA e 1º Datathon da UFRGS <br />Porto Alegre, 15 de outubro de 2018

---




background-image: url("images/logo_semanistica_datathon2.png")

---

background-image: url("images/logo_40anos_ppgest2.png")

---

# Estatística e Ciência dos dados

&lt;img src="images/tobeornottobe1.jpg" width="45%" style="display: block; margin: auto;" /&gt;

---

# Estatística e Ciência dos dados

&lt;img src="images/data_science_diagram2.png" width="90%" style="display: block; margin: auto;" /&gt;

.footnote[
[**Fonte:** Efron, B. e Hastie, T. (2016). *Computer Age Statistical Inference: Algorithms, Evidence, and Data Science*. Cambridge: Cambridge University Press.](https://web.stanford.edu/~hastie/CASI_files/PDF/casi.pdf)
]

---


&lt;img src="images/datascientist_infographic.jpg" width="76%" style="display: block; margin: auto;" /&gt;

---

class: inverse, middle, center
background-image: url("images/pintando_bordando_colmeia.png")
background-size: contain

---
class: inverse
background-image: url("images/vai_precisar.JPG")
background-size: contain

# Você vai precisar de ...

- [R](https://www.r-project.org)
- [RStudio](https://www.rstudio.com) é recomendável, mas não é necessário.
- Pacotes principais:
    + [ggplot2](https://ggplot2.tidyverse.org)
    + [rmarkdown](https://rmarkdown.rstudio.com)

- Pacotes auxiliares:
    + [knitr](https://yihui.name/knitr/)
    + [plyr](https://rmarkdown.rstudio.com/)
    + [gapminder](https://rmarkdown.rstudio.com/)

- Banco de dados:
    + **gapminder** do pacote `gapminder`
    

- **Arquivos de apoio:**
    + https://www.ufrgs.br/datathon

---

class: inverse, middle, center
background-image: url("images/hex-ggplot2.png")
background-size: contain

---

# O que é o ggplot2?

.pull-left[
&lt;img src="images/hadley1.jpg" width="100%" style="display: block; margin: auto;" /&gt;

]

.pull-right[
- Implementação em **R** da **Gramática dos Gráficos** (*Grammar of the Graphics*; **gg**) de **Leland Wilkinson**&lt;sup&gt;1&lt;/sup&gt; por **Hadley Wickham**&lt;sup&gt;2&lt;/sup&gt;.

- **Pergunta:** que é um gráfico estatístico?
    + **gg:** é um mapeamento dos dados a partir de **atributos estéticos** (cores, formas, tamanho) de **formas geométricas** (pontos, linhas, barras)

]

.footnote[
[1] Wilkinson, L. (2005). *The Grammar of Graphics*. Springer; 2nd edition.

[2] Wickham, H. (2016). *ggplot2: Elegant Graphics for Data Analysis*. Springer; 2nd edition.
]

---

# Por que ggplot2?

.pull-left[

Um gráfico do pacote **graphics**

&lt;img src="index_files/figure-html/unnamed-chunk-5-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

.pull-right[

Um gráfico do pacote **ggplot2**

&lt;img src="index_files/figure-html/unnamed-chunk-6-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

# Por que ggplot2?

.pull-left[

Um gráfico do pacote **graphics**

&lt;img src="index_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

.pull-right[

Um gráfico do pacote **ggplot2**

&lt;img src="index_files/figure-html/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

# Camadas!

- No **ggplot2**, um gráfico é feito por camadas.

&lt;img src="images/camadas2.png" width="70%" style="display: block; margin: auto;" /&gt;

---

background-image:  url("images/totoro_danca2.gif")
background-size: cover
class: center, inverse

# Vamos lá!

---

# Instalando e carregando o ggplot2

- Instalando o pacote **ggplot2**


```r
install.packages("ggplot2")
```

- Carregando o pacote **ggplot2**


```r
library(ggplot2)
```

---

# O banco de dados

- Carregando o banco de dados **gapminder**


```r
# install.packages("gapminder")
library(gapminder)
gapminder
```

```
## # A tibble: 1,704 x 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # ... with 1,694 more rows
```

---

# O banco de dados

- `gdpPercap`: **renda per capita** ("PIB/Pop").
- `lifeExp`: **expectativa de vida** ao nascer (número de anos aproximados que se espera que um grupo de indivíduos nascidos no mesmo ano irá viver).
- `year`: 1952 a 2007 em incrementos de 5 anos.


```r
library(dplyr)
gapminder &lt;- gapminder %&gt;%
  mutate(pop_m = pop/1e6)

gapminder07 &lt;- gapminder %&gt;%
  filter(year == 2007)
```

---

# Camadas: dados


```r
p &lt;- ggplot(data = gapminder07)
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-14-1.png" width="50%" style="display: block; margin: auto;" /&gt;

```r
# print(p)
```

---

background-image:  url("images/tenor.gif")
background-size: cover
class: center, inverse

# Camadas: estética

---

# Camadas: elementos estéticos


```r
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = gdpPercap, y = lifeExp))
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-15-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# Camadas: elementos estéticos

- Os dois elementos estéticos mais importantes são os eixos `x` e `y` do gráfico.
- Existem outros elementos estéticos **(mais variáveis podem ser incorporadas ao gráfico)** que devem ser especificados de acordo com o tipo de gráfico.
    + `color` ou `colour`
    + `fill`
    + `size`
    + `group`
- Veremos a utilização destes elementos na sequência.

---

# Camadas: elementos geométricos


```r
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = gdpPercap, y = lifeExp)) +
* geom_point()
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-16-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# Camadas: elementos geométricos

- O gráfico anterior é um **diagrama de dispersão** (*scatter plot*) e é definido pela função `geom_point()`.
    + Este é acrescentado ao gráfico com o **operador** `+`.
- Diferentes elementos geométricos definem diferentes tipos de gráficos. Os principais são listadas a seguir:
    + `geom_histogram()`: gera um histograma
    + `geom_line()`: gera um gráfico de linha
    + `geom_boxplot()`: gera um diagrama de caixa (boxplot)
    + `geom_bar()`: gera um gráfico de barras/colunas
    + `geom_density()`: gera um gráfico da densidade estimada (por *kernel*)
    + `geom_violin()`: gera um gráfico de violino (mistura de boxplot com densidade estimada)
- Para uma lista completa de `geoms` veja: https://ggplot2.tidyverse.org/reference/index.html#section-layer-geoms.
- **Elementos estéticos** (`aes()`) podem ser passados para cada `geom`.

---

background-image:  url("images/totoro_bambole.gif")
background-size: cover
class: center, inverse

# Exemplos!

---


```r
# Histograma
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = lifeExp)) +
  geom_histogram()
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-17-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
# Densidade estimada
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = lifeExp)) +
  geom_density()
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-18-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
# Densidade estimada (grupos)
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = lifeExp, fill = continent)) +
  geom_density(alpha = 0.3)
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-19-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
# Gráfico de barras
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = continent)) +
  geom_bar()
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-20-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
# Boxplot
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = continent, y = pop_m)) +
  geom_boxplot()
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-21-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
# Gráfico de violino
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = continent, y = pop_m)) +
  geom_violin()
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-22-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
# Gráfico de linha
p &lt;- ggplot(data = gapminder[which(gapminder$country == "Brazil"),],
            mapping = aes(x = year, y = lifeExp)) +
  geom_line(size = 1)
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-23-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
# Gráfico de linha
p &lt;- ggplot(data = gapminder[which(gapminder$continent == "Americas"),],
            mapping = aes(x = factor(year), y = lifeExp, group = country, color = country)) +
  geom_line(size = 1) + geom_point()
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-24-1.png" width="62%" style="display: block; margin: auto;" /&gt;

---

background-image:  url("images/totoro_corda.gif")
background-size: cover
class: center, inverse

# Exercício 1

---

- Acrescente as variáveis continente (`continent`) e população (`pop` ou `pop_m`) ao gráfico abaixo.

&lt;img src="index_files/figure-html/unnamed-chunk-25-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = gdpPercap, y = lifeExp, color = continent, size = pop_m)) +
  geom_point(alpha = 0.3) + geom_text(aes(label = country), color = "gray20")
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-26-1.png" width="65%" style="display: block; margin: auto;" /&gt;

---


```r
p + geom_smooth(method = "lm")
```

&lt;img src="index_files/figure-html/unnamed-chunk-27-1.png" width="65%" style="display: block; margin: auto;" /&gt;

---


```r
p + geom_smooth(mapping = aes(x = gdpPercap, y = lifeExp, color = NULL), method = "lm")
```

&lt;img src="index_files/figure-html/unnamed-chunk-28-1.png" width="65%" style="display: block; margin: auto;" /&gt;

---


```r
p + geom_smooth(mapping = aes(x = gdpPercap, y = lifeExp, color = NULL), method = "lm", formula = y ~ x + log(x), se = FALSE, color = "red")
```

&lt;img src="index_files/figure-html/unnamed-chunk-29-1.png" width="65%" style="display: block; margin: auto;" /&gt;

---

# Camadas: facetas


```r
p &lt;- ggplot(data = gapminder,
            mapping = aes(x = gdpPercap, y = lifeExp)) +
  geom_point() + 
* facet_grid(. ~ year)
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-30-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# Camadas: facetas


```r
p &lt;- ggplot(data = gapminder,
            mapping = aes(x = gdpPercap, y = lifeExp, color = continent)) +
  geom_point() + 
* facet_wrap(. ~ year)
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-31-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# Camadas: facetas


```r
gapminder$gdpPercap.cat &lt;- cut(gapminder$gdpPercap,
                               breaks = c(0, 1005, 3955,
                                          12235, Inf),
                               labels = c("Baixa-renda", 
                                          "Renda média-baixa",
                                          "Renda média-alta",
                                          "Renda alta"))
p &lt;- ggplot(data = gapminder,
            mapping = aes(x = factor(year),
                          y = lifeExp, fill = factor(year))) +
  geom_boxplot() + 
* facet_grid(continent ~ gdpPercap.cat)
p
```

---

# Camadas: facetas

&lt;img src="index_files/figure-html/unnamed-chunk-33-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# Eixos e rótulos


```r
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = gdpPercap, y = lifeExp,
                          color = continent, size = pop_m)) +
  geom_point(alpha = 0.3)
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-34-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

# Eixos e rótulos


```r
p + labs(x = "Renda per capita (US$)",
         y = "Expectativa de vida (anos)",
         color = "Continente", size = "População/1 milhão")
```

&lt;img src="index_files/figure-html/unnamed-chunk-35-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

# Legendas e temas

.pull-left[




```r
p + theme(legend.position = "none")
```

&lt;img src="index_files/figure-html/unnamed-chunk-37-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

.pull-right[


```r
p + theme(legend.position = "top")
```

&lt;img src="index_files/figure-html/unnamed-chunk-38-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

# Temas

- Existem diversos outros elementos do tema de um gráfico que podem ser controlados por argumentos da função `theme()`.


```r
p + theme(text = element_text(color = "gray20"),
        legend.position = c("top"), # posição da legenda
        legend.direction = "horizontal",
        legend.justification = 0.1, # ponto de ancora para legend.position.
        legend.text = element_text(size = 11, color = "gray10"),
        axis.text = element_text(face = "italic"),
        axis.title.x = element_text(vjust = -1),
        axis.title.y = element_text(vjust = 2), 
        axis.ticks.y = element_blank(), # element_blank() é como removemos elementos
        axis.line = element_line(color = "gray40", size = 0.5),
        axis.line.y = element_blank(),
        panel.grid.major = element_line(color = "gray50", size = 0.5),
        panel.grid.major.x = element_blank())
```

---

# Temas

&lt;img src="index_files/figure-html/unnamed-chunk-40-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

background-image: url("images/ufa-homer-1.jpg")
background-size: cover

# Temas pré-definidos

- O pacote **ggplot2** possui alguns temas pré-definidos! Alguns exemplos são:
    + `theme_bw()`: *black and white*
    + `theme_minimal()`: mínimo
    + `theme_classic()`: semelhante aos gráficos do pacote **graphics**
    + `theme_dark()`: escuro

---

# Temas pré-dfinidos


```r
p + theme_bw()
```

&lt;img src="index_files/figure-html/unnamed-chunk-41-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

# Temas pré-definidos II: o pacote ggthemes

.pull-left[

&lt;img src="images/e2b.jpg" width="100%" style="display: block; margin: auto;" /&gt;

]

.pull-right[

- O pacote [**ggthemes**](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/) possui uma série de outros temas pré-definidos! 


```r
# install.packages("ggthemes")
library(ggthemes)
```

]

---

# Temas pré-dfinidos II: ggthemes

.pull-left[


```r
# Wall Street Journal
p + theme_wsj()
```

&lt;img src="index_files/figure-html/unnamed-chunk-44-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

.pull-right[


```r
# The Economist
p + theme_economist()
```

&lt;img src="index_files/figure-html/unnamed-chunk-45-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

# ggplot: um resumo esquemático

&lt;img src="images/ggplot-formula-schematic.png" width="100%" style="display: block; margin: auto;" /&gt;

---

# Salvando um gráfico

.pull-left[

- Você pode salvar o último gráfico realizado com a função `ggsave()`


```r
ggsave("MeuPrimeiroGGPLOT.pdf")
ggsave("MeuPrimeiroGGPLOT.png")
ggsave("MeuPrimeiroGGPLOT.jpg",
       width = 4, height = 4)
```

]

.pull-right[

- Ou ainda, utilizando as funcionalidades do RStudio

&lt;img src="images/ggsave_manual.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

# Considerações finais

- Existem diversos pacotes que foram criados para complementar o **ggplot2**.
    + **ggthemes**
    + **grid**
    + **magick**
    + **plotly**
    + **jcolors**
- Juntos, estes pacotes tem um potencial quase ilimitado para a geração de gráficos no **R**.

---


```r
# Considerações finais: exemplos
# install.packages("jpeg")
# install.packages("grid")
library(jpeg)
library(grid)
img &lt;- readJPEG("~/PintandoEBordando/ArquivosR/images/hans_rosling.jpg")
# start plotting
p &lt;- ggplot(data = gapminder07,
            mapping = aes(x = gdpPercap, y = lifeExp,
                          color = continent, size = pop_m)) + 
  annotation_custom(rasterGrob(img, width = unit(1, "npc"),
                               height = unit(1, "npc")),
                    -Inf, Inf, -Inf, Inf) +
  scale_y_continuous(expand = c(0,0), 
                     limits = c(min(gapminder07$lifeExp) * 0.9, max(gapminder07$lifeExp) * 1.05)) +
  geom_point() +
  labs(x = "Renda per capita (US$)",
       y = "Expectativa de vida (anos)",
       color = "Continente", size = "População/1 milhão") +
  theme_bw() +
  theme(text = element_text(color = "gray20"),
        legend.position = c("top"), # posição da legenda
        legend.direction = "horizontal",
        legend.justification = 0.1, # ponto de ancora para legend.position.
        legend.text = element_text(size = 11, color = "gray10"),
        axis.text = element_text(face = "italic"),
        axis.title.x = element_text(vjust = -1),
        axis.title.y = element_text(vjust = 2), 
        axis.ticks.y = element_blank(), # element_blank() é como removemos elementos
        axis.line = element_line(color = "gray40", size = 0.5),
        axis.line.y = element_blank(),
        panel.grid.major = element_line(color = "gray50", size = 0.5),
        panel.grid.major.x = element_blank()
  )
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-49-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

&lt;img src="index_files/figure-html/unnamed-chunk-50-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---


```r
# Considerações finais: exemplos - interatividade
p &lt;- ggplot(data = gapminder07, mapping = aes(x = gdpPercap, y = lifeExp,
                          color = continent, size = pop_m)) + 
  geom_point() + labs(x = "Renda per capita (US$)", y = "Expectativa de vida (anos)",
       color = "Continente", size = "População/1 milhão") +  theme_bw()
p
```

&lt;img src="index_files/figure-html/unnamed-chunk-51-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
# Considerações finais: exemplos - interatividade
# install.packages("plotly")
library(plotly)
ggplotly(p)
```

<div id="14601a14118a" style="width:100%;height:504px;" class="plotly html-widget"></div>
<script type="application/json" data-for="14601a14118a">{"x":{"data":[{"x":[6223.367465,4797.231267,1441.284873,12569.85177,1217.032994,430.0706916,2042.09524,706.016537,1704.063724,986.1478792,277.5518587,3632.557798,1544.750112,2082.481567,5581.180998,12154.08975,641.3695236,690.8055759,13206.48452,752.7497265,1327.60891,942.6542111,579.231743,1463.249282,1569.331442,414.5073415,12057.49928,1044.770126,759.3499101,1042.581557,1803.151496,10956.99112,3820.17523,823.6856205,4811.060429,619.6768924,2013.977305,7670.122558,863.0884639,1598.435089,1712.472136,862.5407561,926.1410683,9269.657808,2602.394995,4513.480643,1107.482182,882.9699438,7092.923025,1056.380121,1271.211593,469.7092981],"y":[72.301,42.731,56.728,50.728,52.295,49.58,50.43,44.741,50.651,65.152,46.462,55.322,48.328,54.791,71.338,51.579,58.04,52.947,56.735,59.448,60.022,56.007,46.388,54.11,42.592,45.678,73.952,59.443,48.303,54.467,64.164,72.801,71.164,42.082,52.906,56.867,46.859,76.442,46.242,65.528,63.062,42.568,48.159,49.339,58.556,39.613,52.517,58.42,73.923,51.542,42.384,43.487],"text":["~gdpPercap:  6223.3675<br />~lifeExp: 72.301<br />~continent: Africa<br />~pop_m:   33.333216","~gdpPercap:  4797.2313<br />~lifeExp: 42.731<br />~continent: Africa<br />~pop_m:   12.420476","~gdpPercap:  1441.2849<br />~lifeExp: 56.728<br />~continent: Africa<br />~pop_m:    8.078314","~gdpPercap: 12569.8518<br />~lifeExp: 50.728<br />~continent: Africa<br />~pop_m:    1.639131","~gdpPercap:  1217.0330<br />~lifeExp: 52.295<br />~continent: Africa<br />~pop_m:   14.326203","~gdpPercap:   430.0707<br />~lifeExp: 49.580<br />~continent: Africa<br />~pop_m:    8.390505","~gdpPercap:  2042.0952<br />~lifeExp: 50.430<br />~continent: Africa<br />~pop_m:   17.696293","~gdpPercap:   706.0165<br />~lifeExp: 44.741<br />~continent: Africa<br />~pop_m:    4.369038","~gdpPercap:  1704.0637<br />~lifeExp: 50.651<br />~continent: Africa<br />~pop_m:   10.238807","~gdpPercap:   986.1479<br />~lifeExp: 65.152<br />~continent: Africa<br />~pop_m:    0.710960","~gdpPercap:   277.5519<br />~lifeExp: 46.462<br />~continent: Africa<br />~pop_m:   64.606759","~gdpPercap:  3632.5578<br />~lifeExp: 55.322<br />~continent: Africa<br />~pop_m:    3.800610","~gdpPercap:  1544.7501<br />~lifeExp: 48.328<br />~continent: Africa<br />~pop_m:   18.013409","~gdpPercap:  2082.4816<br />~lifeExp: 54.791<br />~continent: Africa<br />~pop_m:    0.496374","~gdpPercap:  5581.1810<br />~lifeExp: 71.338<br />~continent: Africa<br />~pop_m:   80.264543","~gdpPercap: 12154.0897<br />~lifeExp: 51.579<br />~continent: Africa<br />~pop_m:    0.551201","~gdpPercap:   641.3695<br />~lifeExp: 58.040<br />~continent: Africa<br />~pop_m:    4.906585","~gdpPercap:   690.8056<br />~lifeExp: 52.947<br />~continent: Africa<br />~pop_m:   76.511887","~gdpPercap: 13206.4845<br />~lifeExp: 56.735<br />~continent: Africa<br />~pop_m:    1.454867","~gdpPercap:   752.7497<br />~lifeExp: 59.448<br />~continent: Africa<br />~pop_m:    1.688359","~gdpPercap:  1327.6089<br />~lifeExp: 60.022<br />~continent: Africa<br />~pop_m:   22.873338","~gdpPercap:   942.6542<br />~lifeExp: 56.007<br />~continent: Africa<br />~pop_m:    9.947814","~gdpPercap:   579.2317<br />~lifeExp: 46.388<br />~continent: Africa<br />~pop_m:    1.472041","~gdpPercap:  1463.2493<br />~lifeExp: 54.110<br />~continent: Africa<br />~pop_m:   35.610177","~gdpPercap:  1569.3314<br />~lifeExp: 42.592<br />~continent: Africa<br />~pop_m:    2.012649","~gdpPercap:   414.5073<br />~lifeExp: 45.678<br />~continent: Africa<br />~pop_m:    3.193942","~gdpPercap: 12057.4993<br />~lifeExp: 73.952<br />~continent: Africa<br />~pop_m:    6.036914","~gdpPercap:  1044.7701<br />~lifeExp: 59.443<br />~continent: Africa<br />~pop_m:   19.167654","~gdpPercap:   759.3499<br />~lifeExp: 48.303<br />~continent: Africa<br />~pop_m:   13.327079","~gdpPercap:  1042.5816<br />~lifeExp: 54.467<br />~continent: Africa<br />~pop_m:   12.031795","~gdpPercap:  1803.1515<br />~lifeExp: 64.164<br />~continent: Africa<br />~pop_m:    3.270065","~gdpPercap: 10956.9911<br />~lifeExp: 72.801<br />~continent: Africa<br />~pop_m:    1.250882","~gdpPercap:  3820.1752<br />~lifeExp: 71.164<br />~continent: Africa<br />~pop_m:   33.757175","~gdpPercap:   823.6856<br />~lifeExp: 42.082<br />~continent: Africa<br />~pop_m:   19.951656","~gdpPercap:  4811.0604<br />~lifeExp: 52.906<br />~continent: Africa<br />~pop_m:    2.055080","~gdpPercap:   619.6769<br />~lifeExp: 56.867<br />~continent: Africa<br />~pop_m:   12.894865","~gdpPercap:  2013.9773<br />~lifeExp: 46.859<br />~continent: Africa<br />~pop_m:  135.031164","~gdpPercap:  7670.1226<br />~lifeExp: 76.442<br />~continent: Africa<br />~pop_m:    0.798094","~gdpPercap:   863.0885<br />~lifeExp: 46.242<br />~continent: Africa<br />~pop_m:    8.860588","~gdpPercap:  1598.4351<br />~lifeExp: 65.528<br />~continent: Africa<br />~pop_m:    0.199579","~gdpPercap:  1712.4721<br />~lifeExp: 63.062<br />~continent: Africa<br />~pop_m:   12.267493","~gdpPercap:   862.5408<br />~lifeExp: 42.568<br />~continent: Africa<br />~pop_m:    6.144562","~gdpPercap:   926.1411<br />~lifeExp: 48.159<br />~continent: Africa<br />~pop_m:    9.118773","~gdpPercap:  9269.6578<br />~lifeExp: 49.339<br />~continent: Africa<br />~pop_m:   43.997828","~gdpPercap:  2602.3950<br />~lifeExp: 58.556<br />~continent: Africa<br />~pop_m:   42.292929","~gdpPercap:  4513.4806<br />~lifeExp: 39.613<br />~continent: Africa<br />~pop_m:    1.133066","~gdpPercap:  1107.4822<br />~lifeExp: 52.517<br />~continent: Africa<br />~pop_m:   38.139640","~gdpPercap:   882.9699<br />~lifeExp: 58.420<br />~continent: Africa<br />~pop_m:    5.701579","~gdpPercap:  7092.9230<br />~lifeExp: 73.923<br />~continent: Africa<br />~pop_m:   10.276158","~gdpPercap:  1056.3801<br />~lifeExp: 51.542<br />~continent: Africa<br />~pop_m:   29.170398","~gdpPercap:  1271.2116<br />~lifeExp: 42.384<br />~continent: Africa<br />~pop_m:   11.746035","~gdpPercap:   469.7093<br />~lifeExp: 43.487<br />~continent: Africa<br />~pop_m:   12.311143"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":[6.77527173254923,5.598900411863,5.24035330707835,4.40395768399738,5.7356199392208,5.26901439581437,5.9564773609874,4.8422259478741,5.42852631166044,4.15169850163956,7.9562662998771,4.76713328307226,5.97611663817011,4.06305719383881,8.43636871732964,4.08813627550005,4.90865391372741,8.32592567062337,4.36262596871136,4.41454467512776,6.25770233060098,5.40445197132612,4.3666011970112,6.87649613589243,4.480300710223,4.68010775450673,5.03693920169262,6.0461636385333,5.66517797748393,5.5697344023561,4.69148323166173,4.31315004312066,6.79437672410524,6.09253246174489,4.48845333089755,5.6338762963756,9.82271393327331,4.18215900239245,5.3111594952501,3.77952755905512,5.58747695964146,5.04848038390226,5.33382085391144,7.22380829377829,7.1561065468969,4.282361176813,6.98520027409899,5.00028803920838,5.43159101796171,6.580769078434,5.54798462578679,5.59074371141117],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[12779.37964,3822.137084,9065.800825,36319.23501,13171.63885,7006.580419,9645.06142,8948.102923,6025.374752,6873.262326,5728.353514,5186.050003,1201.637154,3548.330846,7320.880262,11977.57496,2749.320965,9809.185636,4172.838464,7408.905561,19328.70901,18008.50924,42951.65309,10611.46299,11415.80569],"y":[75.32,65.554,72.39,80.653,78.553,72.889,78.782,78.273,72.235,74.994,71.878,70.259,60.916,70.198,72.567,76.195,72.899,75.537,71.752,71.421,78.746,69.819,78.242,76.384,73.747],"text":["~gdpPercap: 12779.3796<br />~lifeExp: 75.320<br />~continent: Americas<br />~pop_m:   40.301927","~gdpPercap:  3822.1371<br />~lifeExp: 65.554<br />~continent: Americas<br />~pop_m:    9.119152","~gdpPercap:  9065.8008<br />~lifeExp: 72.390<br />~continent: Americas<br />~pop_m:  190.010647","~gdpPercap: 36319.2350<br />~lifeExp: 80.653<br />~continent: Americas<br />~pop_m:   33.390141","~gdpPercap: 13171.6388<br />~lifeExp: 78.553<br />~continent: Americas<br />~pop_m:   16.284741","~gdpPercap:  7006.5804<br />~lifeExp: 72.889<br />~continent: Americas<br />~pop_m:   44.227550","~gdpPercap:  9645.0614<br />~lifeExp: 78.782<br />~continent: Americas<br />~pop_m:    4.133884","~gdpPercap:  8948.1029<br />~lifeExp: 78.273<br />~continent: Americas<br />~pop_m:   11.416987","~gdpPercap:  6025.3748<br />~lifeExp: 72.235<br />~continent: Americas<br />~pop_m:    9.319622","~gdpPercap:  6873.2623<br />~lifeExp: 74.994<br />~continent: Americas<br />~pop_m:   13.755680","~gdpPercap:  5728.3535<br />~lifeExp: 71.878<br />~continent: Americas<br />~pop_m:    6.939688","~gdpPercap:  5186.0500<br />~lifeExp: 70.259<br />~continent: Americas<br />~pop_m:   12.572928","~gdpPercap:  1201.6372<br />~lifeExp: 60.916<br />~continent: Americas<br />~pop_m:    8.502814","~gdpPercap:  3548.3308<br />~lifeExp: 70.198<br />~continent: Americas<br />~pop_m:    7.483763","~gdpPercap:  7320.8803<br />~lifeExp: 72.567<br />~continent: Americas<br />~pop_m:    2.780132","~gdpPercap: 11977.5750<br />~lifeExp: 76.195<br />~continent: Americas<br />~pop_m:  108.700891","~gdpPercap:  2749.3210<br />~lifeExp: 72.899<br />~continent: Americas<br />~pop_m:    5.675356","~gdpPercap:  9809.1856<br />~lifeExp: 75.537<br />~continent: Americas<br />~pop_m:    3.242173","~gdpPercap:  4172.8385<br />~lifeExp: 71.752<br />~continent: Americas<br />~pop_m:    6.667147","~gdpPercap:  7408.9056<br />~lifeExp: 71.421<br />~continent: Americas<br />~pop_m:   28.674757","~gdpPercap: 19328.7090<br />~lifeExp: 78.746<br />~continent: Americas<br />~pop_m:    3.942491","~gdpPercap: 18008.5092<br />~lifeExp: 69.819<br />~continent: Americas<br />~pop_m:    1.056608","~gdpPercap: 42951.6531<br />~lifeExp: 78.242<br />~continent: Americas<br />~pop_m:  301.139947","~gdpPercap: 10611.4630<br />~lifeExp: 76.384<br />~continent: Americas<br />~pop_m:    3.447496","~gdpPercap: 11415.8057<br />~lifeExp: 73.747<br />~continent: Americas<br />~pop_m:   26.084662"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":[7.07528369289545,5.33385387656466,10.9497220287062,6.77784403625228,5.86681801798997,7.23282911414924,4.81182340745332,5.52260397354913,5.35122378867242,5.69571313317988,5.1306777542305,5.61021330347734,5.27919109958551,5.18415329737334,4.6155666029278,9.20063061292984,4.99737544049698,4.68733172329479,5.10307852744492,6.55670348636785,4.78640121163658,4.26132881438327,12.807919245623,4.71746231550028,6.42738713411734],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[974.5803384,29796.04834,1391.253792,1713.778686,4959.114854,39724.97867,2452.210407,3540.651564,11605.71449,4471.061906,25523.2771,31656.06806,4519.461171,1593.06548,23348.13973,47306.98978,10461.05868,12451.6558,3095.772271,944,1091.359778,22316.19287,2605.94758,3190.481016,21654.83194,47143.17964,3970.095407,4184.548089,28718.27684,7458.396327,2441.576404,3025.349798,2280.769906],"y":[43.828,75.635,64.062,59.723,72.961,82.208,64.698,70.65,70.964,59.545,80.745,82.603,72.535,67.297,78.623,77.588,71.993,74.241,66.803,62.069,63.785,75.64,65.483,71.688,72.777,79.972,72.396,74.143,78.4,70.616,74.249,73.422,62.698],"text":["~gdpPercap:   974.5803<br />~lifeExp: 43.828<br />~continent: Asia<br />~pop_m:   31.889923","~gdpPercap: 29796.0483<br />~lifeExp: 75.635<br />~continent: Asia<br />~pop_m:    0.708573","~gdpPercap:  1391.2538<br />~lifeExp: 64.062<br />~continent: Asia<br />~pop_m:  150.448339","~gdpPercap:  1713.7787<br />~lifeExp: 59.723<br />~continent: Asia<br />~pop_m:   14.131858","~gdpPercap:  4959.1149<br />~lifeExp: 72.961<br />~continent: Asia<br />~pop_m: 1318.683096","~gdpPercap: 39724.9787<br />~lifeExp: 82.208<br />~continent: Asia<br />~pop_m:    6.980412","~gdpPercap:  2452.2104<br />~lifeExp: 64.698<br />~continent: Asia<br />~pop_m: 1110.396331","~gdpPercap:  3540.6516<br />~lifeExp: 70.650<br />~continent: Asia<br />~pop_m:  223.547000","~gdpPercap: 11605.7145<br />~lifeExp: 70.964<br />~continent: Asia<br />~pop_m:   69.453570","~gdpPercap:  4471.0619<br />~lifeExp: 59.545<br />~continent: Asia<br />~pop_m:   27.499638","~gdpPercap: 25523.2771<br />~lifeExp: 80.745<br />~continent: Asia<br />~pop_m:    6.426679","~gdpPercap: 31656.0681<br />~lifeExp: 82.603<br />~continent: Asia<br />~pop_m:  127.467972","~gdpPercap:  4519.4612<br />~lifeExp: 72.535<br />~continent: Asia<br />~pop_m:    6.053193","~gdpPercap:  1593.0655<br />~lifeExp: 67.297<br />~continent: Asia<br />~pop_m:   23.301725","~gdpPercap: 23348.1397<br />~lifeExp: 78.623<br />~continent: Asia<br />~pop_m:   49.044790","~gdpPercap: 47306.9898<br />~lifeExp: 77.588<br />~continent: Asia<br />~pop_m:    2.505559","~gdpPercap: 10461.0587<br />~lifeExp: 71.993<br />~continent: Asia<br />~pop_m:    3.921278","~gdpPercap: 12451.6558<br />~lifeExp: 74.241<br />~continent: Asia<br />~pop_m:   24.821286","~gdpPercap:  3095.7723<br />~lifeExp: 66.803<br />~continent: Asia<br />~pop_m:    2.874127","~gdpPercap:   944.0000<br />~lifeExp: 62.069<br />~continent: Asia<br />~pop_m:   47.761980","~gdpPercap:  1091.3598<br />~lifeExp: 63.785<br />~continent: Asia<br />~pop_m:   28.901790","~gdpPercap: 22316.1929<br />~lifeExp: 75.640<br />~continent: Asia<br />~pop_m:    3.204897","~gdpPercap:  2605.9476<br />~lifeExp: 65.483<br />~continent: Asia<br />~pop_m:  169.270617","~gdpPercap:  3190.4810<br />~lifeExp: 71.688<br />~continent: Asia<br />~pop_m:   91.077287","~gdpPercap: 21654.8319<br />~lifeExp: 72.777<br />~continent: Asia<br />~pop_m:   27.601038","~gdpPercap: 47143.1796<br />~lifeExp: 79.972<br />~continent: Asia<br />~pop_m:    4.553009","~gdpPercap:  3970.0954<br />~lifeExp: 72.396<br />~continent: Asia<br />~pop_m:   20.378239","~gdpPercap:  4184.5481<br />~lifeExp: 74.143<br />~continent: Asia<br />~pop_m:   19.314747","~gdpPercap: 28718.2768<br />~lifeExp: 78.400<br />~continent: Asia<br />~pop_m:   23.174294","~gdpPercap:  7458.3963<br />~lifeExp: 70.616<br />~continent: Asia<br />~pop_m:   65.068149","~gdpPercap:  2441.5764<br />~lifeExp: 74.249<br />~continent: Asia<br />~pop_m:   85.262356","~gdpPercap:  3025.3498<br />~lifeExp: 73.422<br />~continent: Asia<br />~pop_m:    4.018332","~gdpPercap:  2280.7699<br />~lifeExp: 62.698<br />~continent: Asia<br />~pop_m:   22.211743"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":[6.70929835135528,4.1508288847182,10.1588656081799,5.72211801075065,22.6771653543307,5.13475345805415,21.1203680953071,11.5573968303758,8.11057131553749,6.49879524068774,5.07824026167466,9.65077587363648,5.03869129857133,6.28100350114513,7.4168446506104,4.56983839481089,4.78354392302204,6.36196165910748,4.63065651672448,7.36876387589759,6.56775273775666,4.68175365529605,10.5466615830696,8.74086596862592,6.50384061768477,4.86541785279541,6.11737587407916,6.05493528307165,6.27409491409121,7.97119993399054,8.57951329437571,4.79655097614072,6.22127948111281],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[5937.029526,36126.4927,33692.60508,7446.298803,10680.79282,14619.22272,22833.30851,35278.41874,33207.0844,30470.0167,32170.37442,27538.41188,18008.94444,36180.78919,40675.99635,28569.7197,9253.896111,36797.93332,49357.19017,15389.92468,20509.64777,10808.47561,9786.534714,18678.31435,25768.25759,28821.0637,33859.74835,37506.41907,8458.276384,33203.26128],"y":[76.423,79.829,79.441,74.852,73.005,75.748,76.486,78.332,79.313,80.657,79.406,79.483,73.338,81.757,78.885,80.546,74.543,79.762,80.196,75.563,78.098,72.476,74.002,74.663,77.926,80.941,80.884,81.701,71.777,79.425],"text":["~gdpPercap:  5937.0295<br />~lifeExp: 76.423<br />~continent: Europe<br />~pop_m:    3.600523","~gdpPercap: 36126.4927<br />~lifeExp: 79.829<br />~continent: Europe<br />~pop_m:    8.199783","~gdpPercap: 33692.6051<br />~lifeExp: 79.441<br />~continent: Europe<br />~pop_m:   10.392226","~gdpPercap:  7446.2988<br />~lifeExp: 74.852<br />~continent: Europe<br />~pop_m:    4.552198","~gdpPercap: 10680.7928<br />~lifeExp: 73.005<br />~continent: Europe<br />~pop_m:    7.322858","~gdpPercap: 14619.2227<br />~lifeExp: 75.748<br />~continent: Europe<br />~pop_m:    4.493312","~gdpPercap: 22833.3085<br />~lifeExp: 76.486<br />~continent: Europe<br />~pop_m:   10.228744","~gdpPercap: 35278.4187<br />~lifeExp: 78.332<br />~continent: Europe<br />~pop_m:    5.468120","~gdpPercap: 33207.0844<br />~lifeExp: 79.313<br />~continent: Europe<br />~pop_m:    5.238460","~gdpPercap: 30470.0167<br />~lifeExp: 80.657<br />~continent: Europe<br />~pop_m:   61.083916","~gdpPercap: 32170.3744<br />~lifeExp: 79.406<br />~continent: Europe<br />~pop_m:   82.400996","~gdpPercap: 27538.4119<br />~lifeExp: 79.483<br />~continent: Europe<br />~pop_m:   10.706290","~gdpPercap: 18008.9444<br />~lifeExp: 73.338<br />~continent: Europe<br />~pop_m:    9.956108","~gdpPercap: 36180.7892<br />~lifeExp: 81.757<br />~continent: Europe<br />~pop_m:    0.301931","~gdpPercap: 40675.9964<br />~lifeExp: 78.885<br />~continent: Europe<br />~pop_m:    4.109086","~gdpPercap: 28569.7197<br />~lifeExp: 80.546<br />~continent: Europe<br />~pop_m:   58.147733","~gdpPercap:  9253.8961<br />~lifeExp: 74.543<br />~continent: Europe<br />~pop_m:    0.684736","~gdpPercap: 36797.9333<br />~lifeExp: 79.762<br />~continent: Europe<br />~pop_m:   16.570613","~gdpPercap: 49357.1902<br />~lifeExp: 80.196<br />~continent: Europe<br />~pop_m:    4.627926","~gdpPercap: 15389.9247<br />~lifeExp: 75.563<br />~continent: Europe<br />~pop_m:   38.518241","~gdpPercap: 20509.6478<br />~lifeExp: 78.098<br />~continent: Europe<br />~pop_m:   10.642836","~gdpPercap: 10808.4756<br />~lifeExp: 72.476<br />~continent: Europe<br />~pop_m:   22.276056","~gdpPercap:  9786.5347<br />~lifeExp: 74.002<br />~continent: Europe<br />~pop_m:   10.150265","~gdpPercap: 18678.3144<br />~lifeExp: 74.663<br />~continent: Europe<br />~pop_m:    5.447502","~gdpPercap: 25768.2576<br />~lifeExp: 77.926<br />~continent: Europe<br />~pop_m:    2.009245","~gdpPercap: 28821.0637<br />~lifeExp: 80.941<br />~continent: Europe<br />~pop_m:   40.448191","~gdpPercap: 33859.7484<br />~lifeExp: 80.884<br />~continent: Europe<br />~pop_m:    9.031088","~gdpPercap: 37506.4191<br />~lifeExp: 81.701<br />~continent: Europe<br />~pop_m:    7.554661","~gdpPercap:  8458.2764<br />~lifeExp: 71.777<br />~continent: Europe<br />~pop_m:   71.158647","~gdpPercap: 33203.2613<br />~lifeExp: 79.425<br />~continent: Europe<br />~pop_m:   60.776238"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":[4.73930360976545,5.2515712457991,5.44107849786917,4.86531670289218,5.16855282584858,4.85794694387522,5.42769965273683,4.97410786436283,4.94778140481952,7.84043376621969,8.49809123744673,5.46648280699294,5.40514308400654,3.9460291298415,4.8085649745634,7.74130405516196,4.14203032052794,5.88528441607637,4.87472139425141,7.00115515259145,5.46138101214586,6.22484391610449,5.42123845033248,4.97176812735327,4.47964255788798,7.0812884751231,5.32616181946541,5.19097245574501,8.16356363915206,7.83015990857845],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[34435.36744,25185.00911],"y":[81.235,80.204],"text":["~gdpPercap: 34435.3674<br />~lifeExp: 81.235<br />~continent: Oceania<br />~pop_m:   20.434176","~gdpPercap: 25185.0091<br />~lifeExp: 80.204<br />~continent: Oceania<br />~pop_m:    4.115771"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":1,"size":[6.12061399094626,4.80944439195868],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(231,107,243,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":23.3059360730594,"r":7.30593607305936,"b":37.2602739726027,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"type":"linear","autorange":false,"range":[-2176.430056865,51811.172085565],"tickmode":"array","ticktext":["0","10000","20000","30000","40000","50000"],"tickvals":[0,10000,20000,30000,40000,50000],"categoryorder":"array","categoryarray":["0","10000","20000","30000","40000","50000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"Renda per capita (US$)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"type":"linear","autorange":false,"range":[37.4635,84.7525],"tickmode":"array","ticktext":["40","50","60","70","80"],"tickvals":[40,50,60,70,80],"categoryorder":"array","categoryarray":["40","50","60","70","80"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"Expectativa de vida (anos)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.876265466816648},"annotations":[{"text":"População/1 milhão<br />Continente","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"source":"A","attrs":{"14606dd11fc1":{"x":{},"y":{},"colour":{},"size":{},"type":"scatter"}},"cur_data":"14606dd11fc1","visdat":{"14606dd11fc1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>

---

background-image:  url("images/porquecomprar-v2.gif")
background-size: cover
class: center, middle, inverse

# Perguntas!?!

---

class: inverse, middle, center
background-image: url("images/rmarkdown.png")
background-size: contain

---

# O que é o rmarkdown&lt;sup&gt;1&lt;/sup&gt;?

.pull-left[

&lt;img src="images/yihui1.jpg" width="100%" style="display: block; margin: auto;" /&gt;

]

.pull-right[

&lt;img src="images/rstudio-hex-knitr-dot-psd.png" width="40%" style="display: block; margin: auto;" /&gt;

- **R** (códigos) + **Markdown** (linguagem **simples** de marcação para geração de **texto**)
    + [**Pandoc**](http://pandoc.org/) (conversor universal de documentos)

]

.footnote[
[1] Allaire, J.J., Xie, Y., McPherson, J., Luraschi, J., Ushey, K., Atkins, A., Wickham, H., Cheng, J. e Chang, W. (2018). *rmarkdown: Dynamic
  Documents for R*. R package version 1.10.
]

---

background-image: url("images/bandThree2.png")
background-size: cover

# O fluxo do rmarkdown?

&lt;img src="images/rmarkdownflow.png" width="100%" style="display: block; margin: auto;" /&gt;

- Quando compilado, o **R Markdown** alimenta o arquivo .Rmd para **knitr**, que executa todos os fragmentos de código e cria um novo documento markdown (.md) que inclui o código e sua saída.
- O arquivo markdown gerado pelo **knitr** é então processado pelo **pandoc**⧉ que é responsável pela criação do formato final.
- Isso pode parecer complicado, mas o **R Markdown** torna extremamente simples encapsulando todo o processamento acima em uma única função de renderização.

---

# Por que rmarkdown?

&lt;img src="images/r_comunica.png" width="100%" style="display: block; margin: auto;" /&gt;

- Vamos a um exemplo!

---

background-image:  url("images/totoro_danca.gif")
background-size: cover
class: center, inverse

# Vamos lá!

---

# Instalando e carregando o rmarkdown

- Instalando o pacote **rmarkdown**


```r
install.packages("rmarkdown")
```

- Carregando o pacote **rmarkdown**


```r
library(rmarkdown)
```

---

# Criando um documento R markdown

- Clique em `File -&gt; New File -&gt; R Markdown`

&lt;img src="images/rmd_print_1.png" width="55%" style="display: block; margin: auto;" /&gt;

---

# Criando um documento R markdown

- Agora você deve ver uma caixa de diálogo como mostrado abaixo.
- Selecione "Document" no painel à esquerda e preencha o campo de título e autor e clique em "OK".

&lt;img src="images/rmd_print_2.png" width="60%" style="display: block; margin: auto;" /&gt;

---

# Criando um documento R markdown

- Agora você deve ter um documento que parece com isso

&lt;img src="images/rmd_print_3.png" width="100%" style="display: block; margin: auto;" /&gt;

---

# YAML

- Um conjunto de opções que definem o arquivo de saída

.pull-left[

- Este documento gera um arquivo `html`

```yaml
---
title: "Exemplo 1 - Rmd"
author: "Rodrigo Citton P. dos Reis"
date: "15 de outubro de 2018"
output: html_document
---
```

]

.pull-right[

- Este documento gera um arquivo `word`

```yaml
---
title: "Exemplo 1 - Rmd"
author: "Rodrigo Citton P. dos Reis"
date: "15 de outubro de 2018"
output: word_document
---
```

]

---

# Markdown: sintaxe básica

.pull-left[

```
texto simples
_italico_
__negrito__
[Datahon](https://www.ufrgs.br/datathon)

# Título 1

## Título 2

### Título 3
```

]

.pull-right[

texto simples

_italico_

__negrito__

[Datahon](https://www.ufrgs.br/datathon)

## Título 1

### Título 2

#### Título 3

]

---

# Markdown: sintaxe básica

.pull-left[

```

- Lista não ordenada
- item 2
    + sub-item 1
    + sub-item 2

1. Lista ordenada
2. item 2
    + sub-item 1
    + sub-item 2

Cabeçalho tabela | Segundo cabeçalho
---------------- | -----------------
Célula tabela    | Célula 2
Célula 3         | Célula 4
```

]

.pull-right[

- Lista não ordenada
- item 2
    + sub-item 1
    + sub-item 2
    
1. Lista ordenada
2. item 2
    + sub-item 1
    + sub-item 2

Cabeçalho tabela | Segundo cabeçalho
---------------- | -----------------
Célula tabela    | Célula 2
Célula 3         | Célula 4

]

---

background-image:  url("images/chuky.gif")
background-size: cover
class: center, inverse

# Chunk!

---

# Chunk

- Os códigos em **R** são passados para o arquivo .Rmd por meio de fragmentos de código (_chunk codes_).
- Um exemplo de chunk:


    ```{r}
    summary(gapminder07$pop_m)
    ```
- Saída:


```r
summary(gapminder07$pop_m)
```

```
##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
##    0.1996    4.5080   10.5175   44.0212   31.2100 1318.6831
```

---

# Chunk

    ```{r, echo=FALSE}
    summary(gapminder07$pop_m)
    ```

- Saída:

```
##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
##    0.1996    4.5080   10.5175   44.0212   31.2100 1318.6831
```

---

# Chunk

    ```{r, eval=FALSE}
    summary(gapminder07$pop_m)
    ```

- Saída:

```r
summary(gapminder07$pop_m)
```

---

# Chunk

    ```{r, echo=FALSE, results='asis'}
    library(knitr)
    mod1 &lt;- lm(lifeExp ~ gdpPercap, data = gapminder07)
    kable(summary(mod1)$coef, format = "html")
    ```

- Saída:
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; t value &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Pr(&amp;gt;|t|) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59.5656501 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.0104086 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 58.95204 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; gdpPercap &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0006371 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0000583 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.93340 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

background-image:  url("images/totoro_jumpingjack.gif")
background-size: cover
class: center, inverse

# Exercício 1!

---

1. Crie um arquivo .Rmd.
2. Acrescente texto e a análise do arquivo **exemplo-rmarkdown-1.R**
3. Clique em `knit` para gerar o arquivo de saída.

&lt;img src="images/rmd_print_4.png" width="100%" style="display: block; margin: auto;" /&gt;

- Experimente gerar diferentes formatos de saída.

&lt;img src="images/rmd_print_5.png" width="100%" style="display: block; margin: auto;" /&gt;

---

# Por que rmarkdown?

&lt;img src="images/r_comunica.png" width="100%" style="display: block; margin: auto;" /&gt;

- Reprodutibilidade
- Dinamismo
- Eficiência
- Velocidade

---

background-image:  url("images/totoro_bola.gif")
background-size: cover
class: center, inverse

# Um último exemplo!

---

background-image:  url("images/porquecomprar-v2.gif")
background-size: cover
class: center, middle, inverse

# Perguntas!?!

---

background-image:  url("images/stat_caco.gif")
background-size: cover
class: middle, center, inverse

# Muito obrigado!

## https://www.ufrgs.br/datathon

### rodrigocpdosreis@gmail.com
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
